!function(a,b){"use strict";var c={};b.templateOptionsHelper={getValuesFromDialog:function(b,c){function d(b){for(var d=0;d<b.length;d++)e=c.propertyEditor("getPropertyValue",b[d].propertyName),a.isEmptyObject(e)||f.push(e)}var e,f=[];return d(b.common),d(b.advanced),f},getProperties:function(d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r=[],s={},t=[],u=[],v={},w={common:[],advanced:[]},x="";for(g&&(x=g.propertyName,p=a.isEmptyObject(g.value),q=!(!g.metaData||!g.metaData.multiSelectData)),h=0;h<d.values.length;h++)m=d.values[h],m.groupId?(i=m.groupId,s.hasOwnProperty(i)?j=s[i]:(k=d.groups[i],r.push({title:k.title,seq:k.seq,nullText:k.nullText,isAdvanced:k.isAdvanced,isRequired:!1,lovValues:[],value:""}),j=r.length-1,s[i]=j),a.inArray(m.r,d.presetValues)!==-1&&(r[j].isRequired=!0,""===r[j].value&&(r[j].value=m.r)),a.inArray(m.r,e)!==-1&&(r[j].value=m.r),r[j].lovValues.push({r:m.r,d:m.d})):(u.push(m),a.inArray(m.r,e)!==-1&&t.push(m.r));for(n=p?c:t.join(":"),r.sort(function(a,b){return a.seq===b.seq?a.title.localeCompare(b.title):a.seq-b.seq}),o={type:"TEMPLATE OPTIONS GENERAL",prompt:b.lang.getMessage("TEMPLATE_OPTIONS.GENERAL"),isReadOnly:!!f,isRequired:!1,lovValues:u,displayGroupId:"common",defaultTemplateOptions:d.defaultValues},q&&(o.multiSelectData=g.metaData.multiSelectData),w.common[0]={propertyName:"general",propertyId:x,value:n,oldValue:n,originalValue:n,metaData:o,errors:[],warnings:[]},h=0;h<r.length;h++)k=r[h],l=k.isAdvanced?"advanced":"common",v=k.value?k.value:"",o={type:a.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:k.title,isReadOnly:!!f,isRequired:k.isRequired,nullText:k.nullText,lovValues:k.lovValues,displayGroupId:l},q&&(o.multiSelectData=g.metaData.multiSelectData),w[l].push({propertyName:"grp"+h,value:v,oldValue:v,originalValue:v,metaData:o,errors:[],warnings:[]});return w},addGeneralPropertyType:function(){a.apex.propertyEditor.addPropertyType("TEMPLATE OPTIONS GENERAL",{init:function(c,d){function e(){var b=a(this).prop("checked");b&&f.prop("checked",!0),f.prop("disabled",b)}var f=a();this["super"]("init",c,d);for(var g=c.find("input[type=checkbox]"),h=g.filter("[value='#DEFAULT#']"),i=0;i<d.metaData.defaultTemplateOptions.length;i++)f=f.add(g.filter("[value='"+b.util.escapeCSS(d.metaData.defaultTemplateOptions[i])+"']"));h.on("click setdefaultcheckboxes",e).trigger("setdefaultcheckboxes")},getValue:function(a){var b=[];return a.find("input[type=checkbox]").filter(":checked:not(:disabled)").each(function(){b.push(this.value)}),b.join(":")},setValue:function(a,b,c){this["super"]("setValue",a,b,c),a.find("input[type=checkbox]").filter("[value='#DEFAULT#']").trigger("setdefaultcheckboxes")}},"CHECKBOXES")}}}(apex.jQuery,apex);
!function(a,b){"use strict";var c="disabled",d="aria-expanded",e=b.ui.keyCode;a.listManager=function(f,g){function h(){var b,c=q.val();b=c!==n?c:null,n=c,q.attr(d,"true"),a.util.openPopupLov(o,b,!1,t,function(a){a&&(n=a.d||a.v||a),q.attr(d,"false")}),o=!1}function i(){k.refresh()}var j,k,l,m=b.extend({dependingOnSelector:null,optimizeRefresh:!0,pageItemsToSubmit:null},g),n="",o=!1,p=b(f,apex.gPageContext$),q=b(f+"_ADD",apex.gPageContext$),r=b(f+"_ADD_lov_btn",apex.gPageContext$),s=q.closest("tr").find("[value='Add']"),t={itemId:f.substring(1)+"_ADD",ajaxIdentifier:g.ajaxIdentifier,initialFetch:g.initialFetch||"empty",isPopup:!1,multiple:!1,display:"list",height:450,width:500,minSearchChars:0,columns:{DISPLAY:{seq:10,index:0},RETURN:{seq:20,index:1}},displayColumn:"DISPLAY",valueColumn:"RETURN"};t.initialSearch="",o=!0,(m.pageItemsToSubmit||m.dependingOnSelector)&&(l=m.pageItemsToSubmit||"",m.dependingOnSelector&&(l.length>0&&(l+=","),l+=m.dependingOnSelector),t.itemsToSubmit=l.replace(/#/g,"").split(/\s*,\s*/)),b(f,apex.gPageContext$).each(function(){var a=this;apex.item.create(this.id,{enable:function(){var d=$x(a.id+"_fieldset");b(":input",d).prop(c,!1).filter("[type!=button]").removeClass("apex_disabled"),r.prop(c,!1)},disable:function(){var d=$x(a.id+"_fieldset");b("option:selected",$x(a.id)).prop("selected",!1),b(":input",d).prop(c,!0).filter("[type!=button]").addClass("apex_disabled"),r.prop(c,!0)},hide:function(){b("#"+a.id+"_fieldset",apex.gPageContext$).hide()},show:function(){b("#"+a.id+"_fieldset",apex.gPageContext$).show()},setValue:function(a){var c,d="";"undefined"!=typeof a&&(c=apex.util.toArray(a),b.each(c,function(a,b){b=apex.util.escapeHTML(b),d+='<option value="'+b+'">'+b+"</option>"}),p.find("option").remove().end().append(d))},getValue:function(){var a=[];return b("option",p[0]).each(function(){a.push(this.value)}),a},isChanged:function(){return $v(p[0])!==j},addValue:function(a){var c,d,e=a.split(","),f=!1,g="";for(d=0;d<e.length;d++)c=b.trim(e[d]),""!==c&&0===p.find('option[value="'+c.replace(/"/g,'\\"')+'"]').length&&(c=apex.util.escapeHTML(c),g='<option value="'+c+'">'+c+"</option>",p.append(g),f=!0);f&&p.change()},removeValue:function(a){var c,d;a?(p.children().each(function(){var d=b(this);d.attr("value")==a&&(d.remove(),c=!0)}),c&&p.change()):(d=p.find(":selected"),d.length>0&&(d.remove(),p.change()))},refresh:function(){var a,c;p.trigger("apexbeforerefresh"),q.val(""),b("option",p).remove(),p.change(),a=q.data("popupLovModelName"),a&&(c=apex.model.get(a),c&&(c.setData([]),apex.model.release(a))),o=!0,p.trigger("apexafterrefresh")},getPopupSelector:function(){return".ui-dialog-popuplov"}}),k=apex.item(this.id)}),j=$v(p[0]),r.click(function(){h()}).focus(function(){q.focus()}),q.keydown(function(a){var b=a.which;b===e.DOWN||b===e.UP?h():b===e.ENTER&&(s.trigger("click"),a.preventDefault())}),m.dependingOnSelector&&b(m.dependingOnSelector,apex.gPageContext$).change(i),p.on("apexrefresh",i),p.change(function(a){void 0!==a.originalEvent&&a.stopImmediatePropagation()})}}(apex.widget,apex.jQuery);
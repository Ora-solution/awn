!function(a){"use strict";var b="u-callout--top",c="u-callout--bottom",d="u-callout--left",e="u-callout--right";a.widget("apex.popup",a.ui.dialog,{version:"19.1",widgetEventPrefix:"popup",options:{parentElement:null,relativePosition:"below",callout:!1,noOverlay:!1},_create:function(){var b=this.options,c=this,f=this.element;b.resizable=!1,b.draggable=!1,b.modal=!b.noOverlay,this._super(),this.calloutBefore=e,this.calloutAfter=d,"rtl"===f.css("direction")&&(this.calloutBefore=d,this.calloutAfter=e),"auto"===b.width&&this.uiDialog.css("display","inline-block").hide(),this.uiDialog.addClass("ui-dialog--popup"),this.uiDialog.children(".ui-dialog-titlebar").hide(),this._setPosition(),f.on("popupopen",function(){var d;b.noOverlay?(d=a(document.body).add(a("iframe").map(function(){return this.contentDocument.documentElement})),setTimeout(function(){d.on("mousedown.popupClose",function(b){var c=a(b.target);c.closest(f)[0]||(f.data("apex-popup").opener=c,f.popup("close"))})},1),f.one("popupclose",function(){d.off("mousedown.popupClose")})):a(".ui-widget-overlay").click(function(){f.popup("close")}),c._updateCallout()})},_destroy:function(){this.callout$&&this.callout$.remove()},_setPosition:function(){var f,g,h,i=0,j=this.options,k=this.element,l=j.relativePosition;j.callout&&j.parentElement?(this.callout$||(this.callout$=a("<div class='u-callout'></div>"),k.after(this.callout$)),i=parseInt(k.parent().css("margin-top"),10)):this.callout$&&(this.callout$.remove(),this.callout$=null),j.parentElement?(g=a(j.parentElement),"above"===l?(f=c,h={my:"left bottom",at:"left top-"+i,of:g,collision:"fit flipfit"}):"below"===l?(f=b,h={my:"left top",at:"left bottom+"+i,of:g,collision:"fit flipfit"}):"before"===l?(f=e,h={my:"right top",at:"left-"+i+" top",of:g,collision:"flipfit fit"}):"after"===l?(f=d,h={my:"left top",at:"right+"+i+" top",of:g,collision:"flipfit fit"}):"inside"===l&&(f=b,h={my:"left top",at:"left+"+i+" top+"+i,of:g}),this.callout$&&this.callout$.removeClass(b+" "+c+" "+e+" "+d).addClass(f)):h={my:"center",at:"center",of:window},this.options.position=h},_updateCallout:function(){var f,g,h,i,j,k;this.callout$&&(k=this.callout$,i=this.element.offset(),j=a(this.options.parentElement).offset(),k.hasClass(b)?i.top<j.top&&k.removeClass(b).addClass(c):k.hasClass(c)?i.top>j.top&&k.removeClass(c).addClass(b):k.hasClass(this.calloutAfter)?i.left<j.left&&k.removeClass(this.calloutAfter).addClass(this.calloutBefore):k.hasClass(this.calloutBefore)&&i.left>j.left&&k.removeClass(this.calloutBefore).addClass(this.calloutAfter),k.css("left",""),k.css("top",""),k.hasClass(b)||k.hasClass(c)?(f=parseInt(k.css("left"),10),h=j.left-i.left,h>0&&k.css("left",h+f)):(k.hasClass(d)||k.hasClass(e))&&(g=parseInt(k.css("top"),10),h=j.top-i.top,h>0&&k.css("top",h+g)))},_setOption:function(a,b){this.options;if("draggable"===a||"resizable"===a||"modal"===a)throw new Error("Popup "+a+" cannot be set.");this._super(a,b),"parentElement"!==a&&"callout"!==a&&"relativePosition"!==a||this._setPosition()}})}(apex.jQuery);
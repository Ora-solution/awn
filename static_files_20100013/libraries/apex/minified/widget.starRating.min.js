!function(a,b,c,d){"use strict";var e=d.ui.keyCode,f="STARS",g="STARS_AND_VALUE",h="VALUE",i="SINGLE_STAR_AND_VALUE",j=" fa ",k="a-StarRating",l="a-StarRating-star",m="a-StarRating-stars",n="a-StarRating-stars-fg",o="a-StarRating-stars-bg",p="a-StarRating-value",q="a-StarRating-clear",r="a-StarRating-starsInner",s="is-focused",t="ui-widget-content ui-corner-all ui-widget ui-tooltip";a.starRating=function(a,u){function v(a){var b=a;return"0"===b||0===b||""===b||null===b||b===!1?(b=Q.isRequired?"":0,x()):(b=parseFloat(b),isNaN(b)&&(b=0,x()),b<0?(b=0,x()):b>Q.numStars&&(N=!0,b=Q.numStars)),b}function w(){return!H.prop("disabled")&&!Q.readOnly}function x(){Q.isRequired||Q.readOnly?H.val("").change():H.val(0).change()}function y(){var a,c=b.htmlBuilder(),e=""===H.val()?0:"";return c.markup("<div ").attr("class",p).markup(">"+e+"</div>"),a=d(c.toString())}function z(){var a,c=b.htmlBuilder();return c.markup("<div ").attr("class",q).attr("title",Q.clearTooltip).markup(">").markup("<span ").attr("aria-hidden","true").attr("class",j+"fa-times-circle-o").markup(">").markup("</span>").markup("</div>"),a=d(c.toString()),a.on("click",function(a){x(),M=!0}),a}function A(a){var c,d="color:",e=Q.activeColor,g=Q.inactiveColor,i=(Q.readOnly,b.htmlBuilder());if(e&&(e=d+e),g&&(g=d+g),i.markup(" <div ").attr("class",m).markup("> ").markup("<div ").attr("class",r).markup(">").markup("<div ").attr("class",o).markup(">"),P!==h)for(c=0;c<I;c++)i.markup("<span ").attr("class",l+j+Q.iconClass).optionalAttr("style",g).markup("></span>");P!==f&&(void 0===a&&(a=0),i.markup("<div ").attr("class",p).markup(">"+a+"</div>"));var k=isNaN(a*J)?0:a*J;if(i.markup("</div>").markup("<div ").attr("class",n).optionalAttr("style","width:"+k+"px;").markup(">"),P!==h)for(c=0;c<I;c++)i.markup("<span ").attr("class",l+j+Q.iconClass).optionalAttr("style",e).markup("></span>");return i.markup("</div>").markup("</div>").markup("</div>"),i.toString()}function B(){var a=v(H.val());if(0!==a||M){M&&(M=!1),a!==K||N||(x(),a=0),K=a,O=!0,N=!1,""===a&&(a=0),C.attr("title",Q.labelText.replace(/#VALUE#/,a)),H.closest("."+k).find("."+n).css("width",a*J+"px"),H.closest("."+k).find("."+p).html(a),H.attr({"aria-valuenow":""+a,"aria-valuetext":Q.labelText.replace(/#VALUE#/,""+a),value:H.val()}),H.closest("."+k).find("."+p).text(a);var b=Q.labelText;Q.iconTooltip.includes("#VALUE#")&&(b=Q.iconTooltip),H.parent().tooltip({show:apex.tooltipManager.defaultShowOption(),position:{my:"left top+15",at:"left center",collision:"flipfit"},content:b.replace(/#VALUE#/,a),tooltipClass:t})}}var C,D,E=e.RIGHT,F=e.LEFT,G="#"+a+"_INPUT",H=d(G),I=u.numStars,J=16,K=H.val(),L=H.val(),M=!1,N=!1,O=!0,P=f,Q=d.extend({numStars:5,iconClass:"fa-star",increment:1,clearTooltip:"Clear Rating",labelText:"#VALUE#",isRequired:!1,showClearButton:!0,showValue:f,readOnlyDisplay:f,readOnly:!1,iconTooltip:""},u);P=Q.readOnly?Q.readOnlyDisplay:Q.showValue,P===i?I=1:P===!0?P=g:P===!1&&(P=f),C=H.addClass("u-vh is-focusable").parent(),D=d("<span style='display: none' class='dummyStar "+l+j+Q.iconClass+"'></span>"),C.append(D),J=d(".dummyStar").width(),d(".dummyStar").remove(),J=0===J?16:J,Q.showClearButton&&!Q.readOnly&&C.append(z()),P!==h?C.append(A()):C.append(y()),H.attr({role:"spinbutton","aria-valuenow":"0","aria-valuemax":""+Q.numStars}),""!==H.val()||Q.isRequired||(H.attr({value:0}),L=H.val(),O=!1),"rtl"===C.css("direction")&&(E=e.LEFT,F=e.RIGHT),C.on("focusin",function(a){H.closest("."+k).find("."+m).addClass(s)}).on("focusout",function(a){H.closest("."+k).find("."+m).removeClass(s)}).on("keydown",function(a){var b=null,c=a.which;if(w()){switch(c){case e.HOME:M=!0,b=0;break;case e.END:M=!0,b=Q.numStars;break;case e.DOWN:case F:M=!0,b=Math.round(v(H.val()))-Q.increment,b=v(b);break;case e.UP:case E:M=!0,b=Math.round(v(H.val()))+Q.increment,b=v(b);break;case e.DELETE:M=!0,b=""}null!==b&&H.val(b).change()}}).on("keyup",function(a){w()&&(M=!0,H.val(v(H.val())),B())}).on("click",function(a){var b,c=d(a.target).closest("."+l);w()&&(b=c.parent().children().index(c)+1,H.val(b).change(),B(),H.focus()),O&&(d(this).tooltip("disable"),d(this).tooltip("enable").tooltip("open"))}).hover(function(){O&&d(this).tooltip("enable").tooltip("open")}).mouseleave(function(){O&&d(this).tooltip("disable")}),B(),c.create(a,{setValue:function(a){0===a||"0"===a?(M=!0,x()):H.val(v(a)),B()},getValue:function(){var a=0,a=""!==H.val()?H.val():0;return a},displayValueFor:function(a){return A(v(a))},isChanged:function(){return L!==H.val()},disable:function(){Q.readOnly=!0,d(G).attr("disabled",!0),d("#"+a+" .a-StarRating-clear").remove()},enable:function(){Q.showClearButton&&Q.readOnly&&C.prepend(z()),d(G).removeAttr("disabled"),Q.readOnly=!1},show:function(){d("#"+a).show()},hide:function(){d("#"+a).hide()},reinit:function(a){M=!0,H.val(a).change(),B()},setFocusTo:function(){return d(G).focus(),H.closest("."+k).find("."+m).addClass(s),d(G)}})}}(apex.widget,apex.util,apex.item,apex.jQuery);
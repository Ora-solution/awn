apex.session={},function(a,b,c,d,e,f){"use strict";function g(){f("#"+t).remove()}function h(a,c){var d=f.extend({id:t,confirm:!0},c);return g(),b.showDialog(a,d)}function i(){p&&(clearTimeout(p),e.info("Idle session warning timer cleared. ID="+p)),q&&(clearTimeout(q),e.info("Idle session expired timer cleared. ID="+q))}function j(){r&&(clearTimeout(r),e.info("Max session warning timer cleared. ID="+r)),s&&(clearTimeout(s),e.info("Max session expired timer cleared. ID="+s))}function k(a){var b,c=new Date,d=a.life_time_ms/1e3,e=n<d?n:d;return c.setSeconds(c.getSeconds()+e),b=c.toLocaleTimeString(void 0,{timeStyle:"medium"})}function l(b){i(),g(),p=setTimeout(function(){a.getTimeouts(function(b){e.info("Is session idle time still valid?",b),b.idle_time_ms-1<1e3*n?(e.info("...Yes, show warning."),h(d.formatMessage("APEX.SESSION.ALERT.IDLE_WARN",k(b)),{okLabelKey:"APEX.SESSION.ALERT.EXTEND",callback:function(b){b&&a.getTimeouts(function(a){e.info("Session extended",a),l(a)},!0)}})):(e.info("...No, reset idle timers to new values."),l(b))})},b.idle_time_ms-1e3*n),q=setTimeout(function(){a.getTimeouts(function(a){e.info("Is session idle expired time still valid?",a),0===a.idle_time_ms?(e.info("...Yes, show expired alert."),j(),h(d.getMessage("APEX.SESSION.ALERT.EXPIRED"),{okLabelKey:"APEX.SESSION.ALERT.CREATE_NEW",callback:function(a){a&&c.redirect(o)}})):(e.info("...No, reset idle timers to new values."),l(a))})},b.idle_time_ms),e.info("Idle session warning timer started for "+(b.idle_time_ms/1e3-n)+" seconds. ID="+p),e.info("Idle session expired timer started for "+b.idle_time_ms/1e3+" seconds. ID="+q)}function m(a){r=setTimeout(function(){e.info("Session max time about to expire, show warning."),i(),h(d.formatMessage("APEX.SESSION.ALERT.MAX_WARN",k(a)),{confirm:!1})},a.life_time_ms-1e3*n),s=setTimeout(function(){e.info("Session max time expired, show expired alert."),h(d.getMessage("APEX.SESSION.ALERT.EXPIRED"),{okLabelKey:"APEX.SESSION.ALERT.CREATE_NEW",callback:function(a){a&&c.redirect(o)}})},a.life_time_ms),e.info("Max session warning timer started for "+(a.life_time_ms/1e3-n)+" seconds. ID="+r),e.info("Max session expired timer started for "+a.life_time_ms/1e3+" seconds. ID="+s)}var n,o,p,q,r,s,t="apex_session_alert_dlg";a.getTimeouts=function(a,b){f.get({url:"apex_session.emit_timeouts?p_app_id="+$v("pFlowId")+"&p_session_id="+$v("pInstance")+"&p_reset_idle="+(b?"Y":"N"),dataType:"json",success:a,error:function(a,b,c){e.error("Error occurred when making session.getTimeouts Ajax call.",a,b,c)}})},a.initTimeouts=function(a,b,c){n=a,o=c,n>0&&(n>b.max_idle_time_ms/1e3?e.warn("Invalid metadata state. Session timeout warning time ("+n+" seconds) cannot be greater than the maximum session idle time ("+b.max_idle_time_ms/1e3+" seconds)."):(l(b),m(b)))}}(apex.session,apex.message,apex.navigation,apex.lang,apex.debug,apex.jQuery);
!function(a){"use strict";var b=a.apex.listview.prototype.options,c=/(^|\s)a-ListView-divider(\s|$)/;b.apexRegionId="",b.apexAjaxIdentifier="",b.apexPageItems="",b.apexFilter="",a(document).on("listviewcreate","ul, ol",function(){function b(a){apex.server.plugin(k.apexAjaxIdentifier,{pageItems:k.apexPageItems,x01:"FETCH",x04:j.data("apex-last-search"),x05:a},{dataType:"html",loadingIndicator:j,loadingIndicatorPosition:"centered",refreshObject:j,clear:1===a?e:void 0,success:f})}function d(c){b(a("li[data-role!='list-divider']",j).length),c.preventDefault()}function e(){j.empty(),j.listview("refresh")}function f(b){var c=a(b),d=c.filter("li[data-role='list-divider']:first"),e=a("li[data-role='list-divider']:last",j);a("li.apex-load-more",j).remove(),j.append(c),d.text()===e.text()&&d.remove(),j.listview("refresh")}function g(){b(1)}function h(){function d(){var a=h.val();j.data("apex-last-search",a),b(1)}var e=a.apex.filterable.prototype.options.filterCallback,f=j.attr("data-input").substr(1),g=a("<div>",{"class":"a-ListView-searchbar ui-filterable ui-bar-"+j.attr("data-filter-theme"),role:"search"}),h=a("<input>",{id:f,placeholder:j.attr("data-filter-placeholder"),"data-type":"search"});h.appendTo(g),g.insertBefore(j),k.inset&&g.addClass("ui-listview-filter-inset"),k.apexFilter?h.on("change",d).on("keydown",function(a){13===a.which&&(a.preventDefault(),d())}):j.filterable({filterCallback:function(a,b){return!this.className.match(c)&&e.call(this,a,b)}})}var i,j=a(this),k=j.data("apex-listview").options;k.apexRegionId&&k.apexAjaxIdentifier&&(i=j.parents("#"+k.apexRegionId),apex.region.create(k.apexRegionId,{type:"ListView",widgetName:"listview",refresh:function(){g()},widget:function(){return j}}),j.on("click","li.apex-load-more",d),(j.attr("data-apex-filter")||j.attr("data-filter"))&&h())})}(apex.jQuery);
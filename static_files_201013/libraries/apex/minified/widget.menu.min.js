!function(a,b,c,d){"use strict";function e(a,b,c,d){a.markup("<span").attr("class",b+" "+c).optionalAttr("style",d).markup("></span>")}function f(a){return Va&&a.match(/^#\S*$/)?Va+a:a}function g(){var a,b,c,e,f;for(z?(e=d(z),f=null):(e=G,f=H),m({$menu:C[0],subMenu:!1,x:e,y:f,slide:!1}),a=1;a<C.length;a++)b=C[a],c=b.parents(ja).eq(0),m({$menu:b,subMenu:!0,x:c,slide:!1})}function h(){d(T).each(function(){d(this).menu("resize")})}function i(){E||(E=!0,d(window).on("blur.menuTracking",function(){Wa.closeAll(!0)}),d("html").on("mousedown.menuTracking",function(a){var b=d(a.target);0!==b.closest(W).length||z&&0!==b.closest(z).length||Wa.closeAll(!0)}).on("mousemove.menuTracking",function(a){var b,c;K===a.pageX&&L===a.pageY||(K=a.pageX,L=a.pageY,b=d(a.target),c=b.parents(W)[0],!c&&x&&(c=b.parent(T)[0]),!c&&P&&P!==c&&d(P).focus(),P=c)}),apex.tooltipManager&&(apex.tooltipManager.disableTooltips(),R=!0))}function j(){d(window).off(".menuTracking"),d("html").off(".menuTracking"),E=!1,apex.tooltipManager&&R&&(apex.tooltipManager.enableTooltips(),R=!1)}function k(a){return a.children(Z).children(_)}function l(){var a;z&&(a=d(z),a.is(ja)?a.find(Ka).focus():a.focus())}function m(b){var c,f,g,h,i,j,l,m,n,o,p,q=0,r=Ea,s="left",t="right",u=b.$menu,v={collision:"flipfit flipfit"},w="none"!==u.css("display");w||u.css({display:"block",position:"absolute",top:-99999,left:0}),b.minWidth&&u.css("min-width",b.minWidth),"true"!==u.attr("data-custom")&&(i=u.find("li").first().outerHeight(),g=d(window).height(),b.$menuBar&&(g-=b.$menuBar.position().top+b.$menuBar.height()),h=g>1e3?.6:g>500?.75:1,g=Math.floor(g*h/i)*i-i,f=u.height(),f>g?(0===k(u).length&&(c=a.htmlBuilder(),c.markup("<div").attr("class",aa+"  "+da).markup(">"),e(c,Na,fa),c.markup("</div>"),u.children(Z).first().addClass(ca).prepend(c.toString()).append(c.toString().replace(fa,ga).replace(da,ea)).children("ul").first().wrap("<div class='"+$+"'></div>")),k(u).height(g)[0].scrollTop=0,u.find(ba+"."+da).addClass(Ga)):k(u).length>0&&(u.children(Z).first().removeClass(ca).children(ba).remove(),u.find("ul").first().unwrap())),"number"==typeof b.x&&"number"==typeof b.y?(G=b.x,H=b.y,v.of=d.Event("click",{pageX:G,pageY:H}),r=null):(G=H=null,v.of=b.x),l=u.children(".u-callout"),y&&(s="right",t="left"),u.removeClass("has-callout"),b.subMenu?(j=parseInt(u.find(Z).css("padding-top"),10),v.my=s+" top-"+j,v.at=t+" top"):(l.length&&(u.addClass("has-callout"),q=parseInt(u.css("margin-top"),10)),v.my=s+" top+"+q,v.at=s+" bottom"),u.position(v),u.css("display",w?"block":"none"),l.removeClass(Ea+" "+Fa),r&&l.length&&(m=parseInt(u.css("top"),10),n=parseInt(u.css("left"),10),o="fixed"===b.x.offsetParent().css("position")?b.x.position():b.x.offset(),p=b.x.outerWidth(),m<o.top&&(r=Fa),l.addClass(r),l.css("left",p/2+(o.left-n-q))),w||(b.slide?u.slideDown(200):u.show(),b.focus&&u.focus())}function n(a){return a.parent().parent().hasClass(S)}function o(a,b){var c=null;return d.each(a.items,function(a,d){return d.id===b?(c=d,!1):("subMenu"!==d.type||(c=o(d.menu,b),null===c))&&void 0}),c}function p(a){var b=null,c=a.search(/_c[0-9]+$/);return c>=0&&(b=1*a.substring(c+2)),b}function q(a,c,e,f,g,h){function i(){var e;d(document.body).on("dialogopen.menu",function(a){var b=d(a.target);e=!0,b.dialog("option","modal")&&b.on("dialogclose.menu",function(a){b.off("dialogclose.menu"),l()})}),setTimeout(function(){d(document.body).off("dialogopen.menu")},150),"string"==typeof a.action&&c?(b.info("Invoke action menu item '"+(a.label||c.lookup(a.action).label)+"'"),A=c.invoke(a.action,{},z)||!1):(b.info("Invoke action menu item '"+a.label+"'"),a.action?A=a.action(f,z)||!1:a.href&&(a.target?apex.navigation.openInNewWindow(a.href,a.target,{favorTabbedBrowsing:!0,noopener:!0}):apex.navigation.redirect(a.href),A=!0)),e&&(A=!0)}var j,k=!1,m=g||a.type;try{if("toggle"===m)"string"==typeof a.action&&c&&(a=c.lookup(a.action),k=!0),j=!a.get(),b.info("Invoke toggle menu item '"+(a.label||(j?a.onLabel:a.offLabel))+"' value now "+j),a.set(j),k&&c.update(a.name),B=!0;else if("radioGroup"===m)"string"==typeof a.action&&c&&(a=c.lookup(a.action),k=!0),j=a.choices[e].value,b.info("Invoke choice menu item '"+a.choices[e].label+"' value now "+j),a.set(j),k&&c.update(a.name),B=!0;else if("action"===m)h?setTimeout(function(){i()},210):i(),B=!0;else if("subMenu"===m)return!1}catch(n){b.error("Error in menu action.",n)}return!0}function r(a,b){var c,d;if(a.menu&&a.menu.items)for(c=0;c<a.menu.items.length;c++)if(d=a.menu.items[c],d.current||r(d,b))return b&&d.current&&delete d.current,!0;return!1}function s(a){a.labelKey&&(a.label=c.getMessage(a.labelKey)),a.onLabelKey&&(a.onLabel=c.getMessage(a.onLabelKey)),a.offLabelKey&&(a.offLabel=c.getMessage(a.offLabelKey))}function t(a){a.is(Ka)?a.focus():a.find(Ka).first().focus()}function u(a){var b,c;return b=a.closest(ia)[0],c=a.find(ia).not(function(a,c){var e=d(c).parent().closest(ia)[0];return e!==b})}function v(a){var b=a.children(wa);return 0===b.length&&(b=a.children(ka).find(wa)),b}var w=null,x=null,y=!1,z=null,A=!1,B=!1,C=[],D=[],E=!1,F=!1,G=null,H=null,I=0,J=0,K=0,L=0,M=null,N=null,O=null,P=null,Q=null,R=!1,S="a-MenuBar",T=".a-MenuBar",U="a-MenuBar--tabs",V="a-Menu",W=".a-Menu",X="a-Menu--top",Y="a-Menu-content",Z="."+Y,$="a-Menu-scroll",_=".a-Menu-scroll",aa="a-Menu-scrollBtn",ba=".a-Menu-scrollBtn",ca="a-Menu--scrollable",da="a-Menu-scrollBtn--up",ea="a-Menu-scrollBtn--down",fa="icon-menu-scroll-up",ga="icon-menu-scroll-down",ha="a-Menu-item",ia="."+ha,ja=".a-Menu-item, .a-MenuBar-item",ka=".a-Menu-inner",la=".a-Menu-item, .a-MenuBar-item, .a-Menu-content",ma=la+", "+ba,na="a-Menu-item--default",oa="a-MenuBar-item",pa="a-MenuBar-item--overflow",qa="a-MenuBar--overflow",ra="a-Menu-statusCol",sa="a-Menu-label",ta="a-Menu-accel",ua="a-MenuBar-label",va=".a-Menu-label",wa=".a-Menu-label,.a-MenuBar-label",xa="a-Menu-subMenuCol",ya=".a-Menu-subMenuCol",za="a-Menu--split",Aa="a-Menu--current",Ba="a-Menu-hSeparator",Ca="a-Menu-itemSep",Da=".a-Menu-itemSep",Ea="u-callout--top",Fa="u-callout--bottom",Ga="is-disabled",Ha="is-focused",Ia="is-active",Ja=".is-focused",Ka="a, button, .a-Menu-label, .a-MenuBar-label",La="is-expanded",Ma=".is-expanded",Na="a-Icon",Oa="button.js-menuButton",Pa="u-RTL",Qa="aria-expanded",Ra="aria-disabled",Sa="aria-haspopup",Ta="aria-checked",Ua=d.ui.keyCode,Va=null;d("base").length&&(Va=window.location.pathname+window.location.search),d(function(){d(window).on("apexwindowresized",function(){h(),E&&g()})});var Wa={openMenu:function(a,b,c,e,f,g){var h=0;this.closeAll(),w=a[0],x=b?b[0]:null,y=d(x||w).hasClass(Pa),z="object"==typeof c&&c.get?c[0]:null,A=!1,B=!1,F=!0,0===C.length&&i(),C.push(a),F=!1,D=[],b&&(c.addClass(La).children(wa).attr(Qa,"true"),h=c.outerWidth()),m({$menu:a,$menuBar:b,subMenu:!1,x:c,y:e,slide:f,focus:g,minWidth:h})},isCurrentMenu:function(a){return w&&w===a},isCurrentMenuBar:function(a){return x&&x===a},isMenuOpen:function(a){var b;for(b=0;b<C.length;b++)if(C[b]===a)return!0;return!1},openSubMenu:function(a,b,c,d,e){this.closeOpenSiblings(a,c),C.push(b),m({$menu:b,subMenu:!0,x:a,slide:d,focus:e}),a.addClass(La).children(ka).find(wa).attr(Qa,"true")},closeOpenSiblings:function(a,b){var c=a.parent().find(Ma);for(b&&(F=!0);c.length>0;)this.closeLast(!1),c=a.parent().find(Ma);F=!1},closeLast:function(a){var b,c,e;C.length>0?(b=C.pop(),c=b.parents(ja).eq(0),c.length>0&&(e=v(c),c.removeClass(La).children(ka),e.attr(Qa,"false"),a&&c.find(Ka).eq(0).focus()),b.hide(),0===C.length&&(!z||A||F||setTimeout(function(){l()},10),x&&(e=v(d(w).find(Ma)),d(w).find(Ma).removeClass(La),e.attr(Qa,"false")),(x||w)&&d(x||w).data("apex-menu")._trigger("afterClose",{},{actionTookFocus:A,actionTaken:B,launcher:z}),w=null,F||(x=null,j()))):(w=null,x=null,j())},closeAll:function(a){for(;C.length>0;)this.closeLast(!1);a&&(w=null,x=null,j())}};d.widget("apex.menu",{version:"19.1",widgetEventPrefix:"menu",options:{menubar:!1,callout:!1,menubarShowSubMenuIcon:null,menubarOverflow:!1,iconType:Na,behaveLikeTabs:!1,tabBehavior:"EXIT",useLinks:!0,slide:!1,firstItemIsDefault:!1,actionsContext:null,items:null,idPrefix:null,customContent:!1,asyncFetchMenu:null,beforeOpen:null,afterClose:null},isActive:!1,scrollTimerId:null,forwardKey:Ua.RIGHT,backwardKey:Ua.LEFT,actionsContext:null,_create:function(){var a,c,e=this.options,f=this.element;if(e.menubar&&e.customContent)throw new Error("Menubar cannot have custom content");if(apex.actions&&(this.actionsContext=e.actionsContext||apex.actions),e.items||e.customContent===!0||(e.items=this._parseMenuMarkup(f,e.menubar).items),!e.menubar&&(e.customContent||e.asyncFetchMenu)||e.items&&0!==e.items.length||b.error("Menu has no menu items"),"rtl"===f.css("direction")&&(f.addClass(Pa),e.menubar||f.attr("dir","rtl"),this.forwardKey=Ua.LEFT,this.backwardKey=Ua.RIGHT),f.attr("tabindex",-1).attr("role",e.menubar?"menubar":"menu").addClass(e.menubar?S:V),e.menubar){if(e.menubarOverflow&&f.addClass(qa),null===e.menubarShowSubMenuIcon)for(e.menubarShowSubMenuIcon=!1,a=0;a<e.items.length;a++)if("subMenu"!==e.items[a].type){e.menubarShowSubMenuIcon=!0;break}this.refresh(),e.behaveLikeTabs&&f.addClass(U),e.firstItemIsDefault&&b.warn("Invalid options for menu bar ignored")}else d("body").append(f),f.hide(),(e.menubarOverflow||e.menubarShowSubMenuIcon||e.behaveLikeTabs)&&b.warn("Invalid options for popup menu ignored");"onwheel"in f[0]||!this._eventHandlers.wheel||(c=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",this._eventHandlers[c]=this._eventHandlers.wheel,delete this._eventHandlers.wheel),this._on(this._eventHandlers)},_eventHandlers:{mousedown:function(a){var b,c,e,f;1!==a.which||a.shiftKey||a.ctrlKey||(f=d(a.target).closest(ma),a.preventDefault(),f.length>0&&!f.hasClass(Y)&&!f.hasClass(Ga)&&(f.is(ba)?(f.addClass(Ia),this._startScrolling(f.closest(W),f.hasClass(da))):n(f)&&(c=f[0].id,b=this._getMenuItemFromId(c),"subMenu"===b.type&&(e=0!==d(a.target).closest(ya).length,(e||!b.action&&!b.href)&&this.toggle(f)))))},mouseup:function(a){var b,c,e,f,g,h,i;1!==a.which||a.shiftKey||a.ctrlKey||(i=d(a.target).closest(la),a.preventDefault(),i.length>0&&!i.hasClass(Y)&&(e=i[0].id,b=this._getMenuItemFromId(e),g=b.type,f=n(i),"subMenu"===g&&f&&(h=0!==d(a.target).closest(ya).length,h||!b.action&&!b.href||(g="action",Wa.closeOpenSiblings(i,f))),"subMenu"===g&&f||!i.is(ja)||i.hasClass(Ga)||"display"===g||(c=p(e),q(b,this.actionsContext,c,this.options,g)&&Wa.closeAll())))},click:function(a){var b,c,e,f;return"A"===a.target.nodeName&&(1!==a.which||a.shiftKey||a.ctrlKey)?void(this.keyboardActivate=!1):(a.preventDefault(),void(this.keyboardActivate&&(this.keyboardActivate=!1,b=d(a.target).closest(la),b.length>0&&!b.hasClass(Y)&&(c=b[0].id,e=this._getMenuItemFromId(c),b.is(ja)&&!b.hasClass(Ga)&&(f=p(c),q(e,this.actionsContext,f,this.options,"subMenu"===e.type?"action":e.type)&&Wa.closeAll())))))},mousemove:function(a){function b(){var a=f.parent().find(Ma);a.length>0&&!N&&(a.removeClass(La),O=a.find(W)[0],N=setTimeout(function(){a.addClass(La),N=null,O=null,Wa.closeOpenSiblings(f,c)},250))}var c,e,f,g,h=this;if(I!==a.pageX||J!==a.pageY){if(I=a.pageX,J=a.pageY,e=d(a.target),N&&e.closest(W)[0]===O&&(d(O).parent().addClass(La),O=null,clearTimeout(N),N=null),f=e.closest(Da),f.length>0&&f[0]!==Q)return M&&(clearTimeout(M),M=null),c=n(f),b(),Q=f[0],g=e.closest(W).eq(0),void(g.length>0&&!g.hasClass(Ha)&&g.focus());if(f=e.closest(ja),f.length>0){if(!f.hasClass(Ha)&&"true"!==v(f).attr(Qa)){if(M&&(clearTimeout(M),M=null),c=n(f),c&&E?(clearTimeout(N),N=null,Wa.closeOpenSiblings(f,c)):b(),this.options.menubar&&!Wa.isCurrentMenuBar(this.element[0])&&!this.isActive)return this.element.find(Ja).removeClass(Ha),void f.addClass(Ha);t(f),!f.hasClass(Ga)&&f.find(W).length>0&&"true"!==v(f).attr(Qa)&&(c?Wa.isCurrentMenuBar(this.element[0])&&this.open(f):M=setTimeout(function(){M=null,Wa.openSubMenu(f,f.children(W).first(),c,h.options.slide,!0)},300))}Q=f[0]}else e.closest(W).first().focus()}},mouseleave:function(a){M&&(clearTimeout(M),M=null),this.options.menubar&&(Wa.isCurrentMenuBar(this.element[0])||this.isActive||this.element.find(Ja).removeClass(Ha))},wheel:function(a){var b,c=d(a.target).closest(W),e=a.originalEvent.deltaY||a.originalEvent.detail||-.025*a.originalEvent.wheelDelta;if(c.length&&!this.options.customContent){if(a.preventDefault(),b=k(c)[0],!b)return;void 0!==a.originalEvent.deltaMode&&1!==a.originalEvent.deltaMode||(e=30*e),b.scrollTop+=e,this._checkScrollBounds(c,b)}},keydown:function(a){function b(a){var b;if(f.hasClass(V))i=f.find(Z).first().find(ja).first();else{if(b=g.index(f),b+=1,b>=g.length){if(a)return!1;b=0}i=g.eq(b)}return t(i),f=i,m&&C._checkScrollBounds(o,m),!0}function c(a){var b;if(f.hasClass(V))i=f.find(Z).first().find(ja).last();else{if(b=g.index(f),b-=1,b<0){if(a)return!1;b=g.length-1}i=g.eq(b)}return t(i),f=i,m&&C._checkScrollBounds(o,m),!0}function e(){C.toggle(f),f.hasClass(za)?f.find(Ka).eq(0).focus():(i=f.find(Z).first().find(ja).first(),t(i))}var f,g,h,i,j,l,m,o,r,s,v,w,x,y,B,C=this,D=a.which;if(!a.altKey)if(j=this.element,this.keyboardActivate=!1,j.hasClass(Ha)?(f=j,j.find(Ma).first().each(function(){f=d(this)})):f=j.find(Ja),o=f.closest(W+","+T),m=k(o)[0],l=f.is(T)||n(f),g=l?j.find("."+oa):u(o),D===Ua.UP||D===Ua.DOWN)l?f.children(W).length>0&&!f.hasClass(Ga)&&(f.hasClass(za)&&Wa.isCurrentMenu(f.children(W)[0])?(i=f.find("ul").first().children(ja).first(),i.find(Ka).focus()):e()):D===Ua.UP?c():b(),a.preventDefault();else if(D===this.forwardKey)l?(b(),Wa.closeOpenSiblings(f,!0),Wa.isCurrentMenuBar(j[0])&&f.children(W).length>0&&!f.hasClass(Ga)&&e()):(i=f.children(W),i.length>0&&!f.hasClass(Ga)?(Wa.openSubMenu(f,i,!1,this.options.slide,!1),i=i.find("ul").first().children(ja).first(),t(i)):this.options.menubar&&(f=j.find(Ma).eq(0),g=j.find("."+oa),b(),Wa.closeOpenSiblings(f,n(f)),f.children(W).length>0&&!f.hasClass(Ga)&&e())),a.preventDefault();else if(D===C.backwardKey)l?(c(),Wa.closeOpenSiblings(f,!0),Wa.isCurrentMenuBar(C.element[0])&&f.children(W).length>0&&!f.hasClass(Ga)&&e()):(i=f.parents(ja).eq(0),i.length>0&&!n(i)?Wa.closeLast(!0):this.options.menubar&&(f=j.find(Ma).eq(0),g=j.find("."+oa),c(),Wa.closeOpenSiblings(f,n(f)),f.children(W).length>0&&!f.hasClass(Ga)&&e())),a.preventDefault();else if(D===Ua.TAB)l?("EXIT"===this.options.tabBehavior||a.shiftKey)&&(A=!0,Wa.closeAll()):(B=this.options.tabBehavior,"NEXT"===B&&(a.shiftKey?c(!0)||(B="EXIT"):b(!0)||(B="EXIT")),"EXIT"===B&&z&&(A=!0,Wa.closeAll(),s=d(":tabbable"),this.options.menubar?(r=s.index(d(z).find(":tabbable")),r<0&&(r=s.index(this.element.find(":tabbable")))):r=s.index(z),r>0&&r<s.length?r+=a.shiftKey?-1:1:s.length>0&&(r=0),r>=0&&s[r].focus()),a.preventDefault());else if(D===Ua.ESCAPE)Wa.closeLast(!0),a.preventDefault();else if(D===Ua.ENTER||D===Ua.SPACE){if(f=j.hasClass(Ha)?j:j.find(Ja),f.hasClass(Ga)||!f.is(ja))return void a.preventDefault();if(v=f[0].id,w=this._getMenuItemFromId(v),x=w.type,l=n(f),"subMenu"===x&&l&&(w.action||w.href)&&(x="action",Wa.closeOpenSiblings(f,l)),"subMenu"===x)l?(C.toggle(f),i=f.find(Z).first().find(ja).first(),t(i)):(h=f.children(W),h.length>0&&(Wa.openSubMenu(f,h,!1,this.options.slide,!1),i=h.find("ul").first().children(ja).first(),t(i)));else{if(("A"!==a.target.nodeName||D!==Ua.SPACE)&&("action"===x||D===Ua.SPACE&&"BUTTON"===a.target.nodeName))return void(this.keyboardActivate=!0);"display"!==x&&(y=p(v),q(w,this.actionsContext,y,this.options,x,D===Ua.SPACE)&&(A=!0,Wa.closeAll()))}a.preventDefault()}},keypress:function(a){var b,c,d,e,f,g,h,i,j=-1;if(0!==a.which&&(f=this.element,f.hasClass(Ha)?(e=f.find(Z).first().find(ja).first(),j=0):e=f.find(Ja),g=e.closest(W),0!==g.length))for(h=u(g),j<0&&(j=h.index(e)+1,j>=h.length&&(j=0)),d=h.eq(j),b=String.fromCharCode(a.which).toLowerCase();;){if(i=d.filter(".a-Menu-label"),0===i.length&&(i=d.find(".a-Menu-label")),i.text().trim().charAt(0).toLowerCase()===b){t(d),c=k(g)[0],c&&this._checkScrollBounds(g,c);break}if(j+=1,j>=h.length&&(j=0),d=h.eq(j),d[0]===e[0])break}},focusin:function(a){var b=d(a.target);this.isActive||this.element.find(Ja).removeClass(Ha),b.is(W)?b.addClass(Ha):b.closest(ja).addClass(Ha),this.isActive=!0},focusout:function(a){var b=d(a.target);b.is(W)?b.removeClass(Ha):b.closest(ja).removeClass(Ha),this.isActive=!1},focus:function(){this.element.addClass(Ha)},blur:function(){this.element.removeClass(Ha)}},_destroy:function(){var a=this.options,c=this.element;E&&Wa.isMenuOpen(this.element)&&(b.warn("Menu destroyed while still tracking menus."),Wa.closeAll(!0)),c.empty().removeClass((a.menubar?S+" "+U:V)+" "+Pa+" "+qa).removeAttr("role")},_setOption:function(a,c){var d,e,f,g,h=this.options;if("menubar"===a)throw new Error("The menubar option cannot be set");if(h.menubar?"customContent"!==a&&"firstItemIsDefault"!==a||b.warn("Option "+a+" ignored when menubar is true"):"menubarOverflow"!==a&&"menubarShowSubMenuIcon"!==a&&"behaveLikeTabs"!==a||b.warn("Option "+a+" ignored when menubar is false"),this._super(a,c),"menubarOverflow"===a&&h.menubar){if(this.element.toggleClass(qa,c),!c&&(e=h.items,d=e[e.length-1],d&&d._overflow)){for(g=d.menu.items;g.length>0;)f=g.shift(),"subMenu"===f.type&&(f.action||f.href)&&f.menu.items.shift(),e.splice(e.length-1,0,f);e.pop()}}else"actionsContext"===a&&(this.actionsContext=c||apex.actions)},refresh:function(){var b,c=this.element,d=this.options,e=d.idPrefix||c[0].id||"menu",f=a.htmlBuilder();return d.menubar&&(b=this._renderMenubar(f,e,d),c.html(f.toString()),this._processMenuCustomMarkup(),this.resize()),this},resize:function(){var b,c=this.element,d=this.options,e=d.idPrefix||c[0].id||"menu",f=a.htmlBuilder();return d.menubar&&d.menubarOverflow&&this._adjustMenubarForSize(e,d)&&(b=this._renderMenubar(f,e,d),c.html(f.toString()),this._processMenuCustomMarkup()),this},toggle:function(a,b){var c=this.element;if(this.options.menubar&&(c=null,"number"==typeof a?(a=this.element.children("ul").children("li").eq(a),a.length>0&&(c=a.children(W))):a.is(ja)&&(c=a.children(W)),!c||1!==c.length))throw new Error("Invalid menu bar menu");return Wa.isCurrentMenu(c[0])?Wa.closeAll():this.open(a,b),this},open:function(e,f){function h(){var b;q._trigger("beforeOpen",{},n),j.customContent?("string"==typeof j.customContent&&(k.empty().append(d("#"+a.escapeCSS(j.customContent)).show()),j.customContent=!0),q._parseCustomMarkup(k,m,j)):(s.clear(),b=q._renderMenu(s,m,j,o,!0),k.html(s.toString()))}var i,j,k,l,m,n,o,p=!1,q=this,r=this.options,s=a.htmlBuilder();if(r.menubar){if(l=this.element,k=null,"number"==typeof e?(e=this.element.children("ul").children("li").eq(e),e.length>0&&(k=e.children(W))):e.is(ja)&&(k=e.children(W)),!k||1!==k.length)throw new Error("Invalid menu bar menu");if(m=e[0].id,j=this._getMenuItemFromId(m),!j||"subMenu"!==j.type||!j.menu)throw new Error("Can't open menu "+e);n=j,j=j.menu,o=!1}else l=null,j=r,n={menu:j},k=this.element,m=r.idPrefix||this.element[0].id||"menu",o=!0;if(d.isFunction(r.asyncFetchMenu)){if(!E&&r.menubar)for(i=0;i<r.items.length;i++)r.items[i]._fetched=!1;r.menubar&&n._fetched===!0?h():(q._renderMenu(s,m,{items:[{type:"action",disabled:!0,label:c.getMessage("APEX.MENU.PROCESSING")}]},o,!0),k.html(s.toString()),p=!0,r.asyncFetchMenu(j,function(a){var b;if(Wa.isCurrentMenu(k[0])){if(a===!1)return void Wa.closeAll(!0);b=k.find(Ja).first(),h(),g(),b.length?t(k.find(ja).first()):k.focus()}}),r.menubar&&(n._fetched=!0))}else h();return p||0!==j.items.length?Wa.openMenu(k,l,e,f,r.slide,r.menubar||f!==!1):(b.error("Menu has no items"),q._trigger("afterClose",{},{actionTookFocus:!1,actionTaken:!1,launcher:null})),this},find:function(a){var b=this.options;return o(b,a)},setCurrentMenuItem:function(a){var d,e,f=0,g=this.options.items;if(!this.options.menubar||!this.options.behaveLikeTabs)return void b.warn("setCurrentMenuItem ignored");if("string"==typeof a&&(a=this.find(a)),a){for(f=0;f<g.length;f++)d=g[f],d.current&&(e=d,delete d.current),r(d,!0);for(a.current=!0,f=0;f<g.length;f++)if(d=g[f],r(d)){d.current=!0,s(e),this.element.find("."+Aa).removeClass(Aa).find(".a-MenuBar-label").text(e.label),this.element.children("ul").children("li").eq(f).addClass(Aa).find(".a-MenuBar-label").append(" <span class='u-VisuallyHidden'>"+c.getMessage("APEX.MENU.CURRENT_MENU")+"</span>");break}}},_parseMenuMarkup:function(a,b){var c=this,e={items:[]};return a.children("ul").children("li").each(function(a){var f,g,h,i,j,k,l,m,n=d(this),o=n.children("a").eq(0),p=n.children("span").eq(0);if(f={type:"action"},o.length>0?(f.label=o.text(),f.href=o.attr("href"),m=o.attr("target"),m&&(f.target=m)):p.length>0?f.label=p.text():f.type="separator","separator"===f.href&&(f.type="separator",delete f.href,delete f.target,delete f.label),i=n.attr("data-id"),i&&(f.id=i),"true"===n.attr("data-hide")&&(f.hide=!0),"true"===n.attr("data-disabled")&&(f.disabled=!0),"true"===n.attr("data-current")&&(f.current=!0),g=n.attr("data-icon"),g&&(h=g.indexOf(" "),h>=0?(f.iconType=g.substring(0,h),f.icon=g.substring(h+1)):f.icon=g),"separator"!==f.type&&(n.children("ul").length>0||"true"===n.attr("data-custom")))if(f.type="subMenu","true"!==n.attr("data-custom"))f.menu=c._parseMenuMarkup(n,!1);else{if(!b)throw new Error("Attribute data-custom only allowed at menubar level");k=n.children(Z).eq(0),j=k[0].id,j||(j=k[0].id=(c.options.idPrefix||c.element[0].id||"menu")+"_cm_"+a),d(document.body).append(k),k.hide(),f.menu={customContent:j}}"action"===f.type&&i&&apex.actions&&(l=c.actionsContext.lookup(i),l&&(f.action=i,delete f.href,delete f.target,delete f.label,delete f.disabled,delete f.icon,delete f.iconType,l.action||l.href?f.type="action":l.get&&l.set&&!l.choices?f.type="toggle":l.choices&&(f.type="radioGroup"))),e.items.push(f)}),e},_parseCustomMarkup:function(a,b,c){var e=this;c.items||(c.items=[]),a.attr("data-custom","true"),0===a.find(Z).length&&a.children().first().addClass(Y),a.find(Ka).each(function(a){var f,g,h,i,j,k;i=d(this),h=i.closest(ia),i.attr("role","menuitem"),0===h.length&&(h=d(this),h.addClass(ha)),h.hasClass(sa)||0!==h.find(va).length||i.addClass(sa),h[0].id=b+"_"+a,j=i.attr("href"),"A"===this.nodeName&&j?(g={type:"action",label:i.text(),href:j},k=i.attr("target"),k&&(g.target=k),c.items[a]=g):"BUTTON"===this.nodeName?(g={type:"action",label:i.text(),action:function(){}},c.items[a]=g):(i.attr("tabindex","-1"),c.items[a]||(g={type:"display",label:i.text(),disabled:!0},c.items[a]=g)),f=h.attr("data-id"),f&&(g.id=f,"action"===g.type&&f&&apex.actions&&e.actionsContext.lookup(f)&&(g.action=f,delete g.href,delete g.target,delete g.label,delete g.disabled,delete g.icon,delete g.iconType))})},_processMenuCustomMarkup:function(){var b=this;this.element.find("."+oa).each(function(){var c=d(this).children(W),e=this.id,f=b._getMenuItemFromId(e).menu;f&&f.customContent&&("string"==typeof f.customContent&&(c.empty().append(d("#"+a.escapeCSS(f.customContent)).show()),f.customContent=!0),b._parseCustomMarkup(c,e,f))})},_getMenuItemFromId:function(a){var b,c,d=this.options,e=a.split("_"),f=[],g=null;for(b=e.length-1,e[b].match(/^c[0-9]+$/)&&(b-=1);b>0&&e[b].match(/^[0-9]+$/);b--)f.unshift(1*e[b]);for(c=d.items,b=0;b<f.length;b++){if(g=c[f[b]],!g||b<f.length-1&&!g.menu)return null;g.menu&&(c=g.menu.items)}return g},_itemIsHidden:function(a){var b=a.hide,c=this.options;return d.isFunction(b)&&(b=a.hide(c)),b},_itemIsDisabled:function(a){var b=a.disabled,c=this.options;return d.isFunction(b)&&(b=a.disabled(c)),b},_renderMenubar:function(a,g,h){var i="",j=this,k=0,l=this.options,m="NEXT"===l.tabBehavior;return l.behaveLikeTabs&&d.each(h.items,function(a,b){if(r(b)&&(b.current=!0),b.current)return k=a,!1}),this.element.find("."+X).filter("[data-custom]").each(function(){var a=d(this).children().eq(0),b=j._getMenuItemFromId(a.closest(ja)[0].id);b.menu.customContent=a[0].id,d(document.body).append(a)}),a.markup("<ul>"),d.each(h.items,function(d,h){var n,o,p,q,r,t=h.type,u=g+"_"+d;if("action"===h.type&&"string"==typeof h.action){if(!apex.actions)throw new Error("Action name requires apex.actions");q=j.actionsContext.lookup(h.action),q?(h.hide=!1,q.label&&!h.label&&(h.label=q.label),void 0!==q.hide&&(h.hide=q.hide),void 0!==q.disabled&&(h.disabled=q.disabled),q.href&&!h.href&&(h.href=q.href,q.target&&(h.target=q.target))):(b.warn("Unknown action name "+h.action+" (item hidden)."),h.hide=!0)}if(!j._itemIsHidden(h)){if(o=oa,p=j._itemIsDisabled(h),p&&(o+=" "+Ga),"subMenu"===h.type&&(h.action||h.href)&&(o+=" "+za),l.behaveLikeTabs&&h.current&&(o+=" "+Aa,r=" <span class='u-VisuallyHidden'>"+c.getMessage("APEX.MENU.CURRENT_MENU")+"</span>"),h._overflow&&(o+=" "+pa),"action"!==t&&"subMenu"!==t)throw new Error("Menu item type not supported in menubar: "+t);a.markup("<li").attr("id",u).attr("class",o).markup(">"),i+=" "+u+"i",s(h),n=h.label,(h.icon||h.iconType)&&b.warn("Menu bar items cannot have icons."),h.accelerator&&b.warn("Menu bar items cannot have accelerators."),p?a.markup("<span role='menuitem'").attr("class",ua).attr("tabindex",m||d===k?"0":"-1").attr("id",u+"i").optionalAttr(Ra,p?"true":null).optionalAttr(Sa,"subMenu"===t?"true":null).markup(">").content(n).markup("</span>"):h.href&&l.useLinks?(a.markup("<a role='menuitem'").attr("class",ua).attr("id",u+"i").attr("href",f(h.href)).optionalAttr("target",h.target?h.target:null).optionalAttr("tabindex",m||d===k?null:"-1").optionalAttr(Sa,"subMenu"===t?"true":null).markup(">").content(n),l.behaveLikeTabs&&h.current&&a.markup(r),a.markup("</a>")):(a.markup("<button type='button' role='menuitem'").attr("class",ua).attr("id",u+"i").optionalAttr("tabindex",m||d===k?null:"-1").optionalAttr(Sa,"subMenu"===t?"true":null),h._overflow?a.attr("title",n).markup("><span class='a-Icon icon-down-chevron'></span>"):(a.markup(">").content(n),l.behaveLikeTabs&&h.current&&a.markup(r)),a.markup("</button>")),"subMenu"===t&&((h.action||h.href||l.menubarShowSubMenuIcon)&&!h._overflow&&(a.markup("<span class='"+xa+"'>"),e(a,Na,!l.menubarShowSubMenuIcon||h.action||h.href?"icon-menu-split-drop-down":"icon-menu-drop-down"),a.markup("</span>")),a.markup("<div").attr("id",u+"m").markup(" class='"+V+" "+X+"' role='menu' tabindex='-1' style='display:none;'></div>")),a.markup("</li>")}}),a.markup("</ul>"),d.trim(i)},_renderMenu:function(c,g,h,i,j){function k(){u=!1,v>0&&(c.markup("<li class='").markup(Ca).markup("' role='separator'><div class='a-Menu-inner'><span class='a-Menu-labelContainer'><span class='").markup(ra).markup("'></span><span class='").markup(Ba).markup("'></span></span><span class='a-Menu-accelContainer'></span></div></li>"),v+=1)}function l(a,b,d){c.markup("<span class='"+ra+"'>"),(b||""===b)&&e(c,a,b,d),c.markup("</span>")}function m(a){c.markup("<span").attr("class",ta).markup("> ").content(a).markup("</span>")}function n(a,b,d,e,g,h,i,j,k){var l;b?(c.markup("<span tabindex='-1'").optionalAttr(Ra,b?"true":null),l="</span>"):g&&q.useLinks?(c.markup("<a").attr("href",f(g)),l="</a>"):(c.markup("<button type='button'"),l="</button>"),c.attr("id",a).attr("role",i).attr("class",sa).optionalAttr("target:",h?h:null).optionalAttr(Sa,k?"true":null).optionalAttr(Ta,null!==j&&j?"true":null).markup(">"),c.content(d),e&&c.markup(" <span class='u-VisuallyHidden'>").content(e).markup("</span>"),c.markup(l).markup("</span><span class='a-Menu-accelContainer'>"),e&&m(e)}function o(){c.markup("<span class='"+xa+"'></span>")}var p="",q=this.options,r=this,t=this.element.hasClass(Pa),u=!1,v=0,w="icon-menu-sub";return t&&(w="icon-menu-sub-rtl"),q.callout&&j&&c.markup("<div class='u-callout'></div>"),c.markup("<div class='"+Y+"'><ul>"),d.each(h.items,function(f,h){var j,m,t,x,y,z,A,B,C,D,E,F,G,H=null,I=h.type,J=g+"_"+f;if(s(h),x=h.icon,y=h.iconType,m=h.label,F=h.href,G=h.target,B=h.accelerator,("action"===h.type||"toggle"===h.type||"radioGroup"===h.type)&&"string"==typeof h.action){if(!apex.actions)throw new Error("Action name requires apex.actions");H=r.actionsContext.lookup(h.action),H?(h.hide=!1,H.icon&&!h.icon&&(x=H.icon),H.iconType&&!h.iconType&&(y=H.iconType),H.label&&!h.label&&(m=H.label),H.shortcut&&!h.accelerator&&(B=apex.actions.shortcutDisplay(H.shortcut)),void 0!==H.hide&&(h.hide=H.hide),void 0!==H.disabled&&(h.disabled=H.disabled),void 0!==H.href&&(F=H.href),void 0!==H.target&&(G=H.target),H.choices&&(h.choices=H.choices)):(b.warn("Unknown action name "+h.action+" (item hidden)."),h.hide=!0)}r._itemIsHidden(h)||(t="separator"===I?Ca:ha,z=r._itemIsDisabled(h),z&&(t+=" "+Ga),0===f&&i&&q.firstItemIsDefault&&(t+=" "+na),"radioGroup"===I?(u=!0,H&&(h=H),j=h.get(),d.each(h.choices,function(a,e){var f=J+"_c"+a,g=j===e.value;B=e.accelerator||null,e.shortcut&&!B&&(B=e.shortcut),t=ha,z=e.disabled,d.isFunction(z)&&(z=e.disabled(q)),z&&(t+=" "+Ga),e.icon&&!H&&b.warn("Radio menu items cannot have icons."),u&&k(),c.markup("<li").attr("id",f).attr("class",t).markup("><div class='a-Menu-inner'><span class='a-Menu-labelContainer'>"),l(Na,g?"icon-menu-radio":""),s(e),C=f+"i",p+=" "+C,n(C,z,e.label,B,null,null,"menuitemradio",g),o(),c.markup("</span></div></li>"),v+=1}),u=!0):"separator"===I?u=!0:(A="toggle"===I?"menuitemcheckbox":"menuitem",u&&k(),C=J+"i",c.markup("<li id='").attr(J).markup("' class='").attr(t).markup("'><div class='a-Menu-inner'><span class='a-Menu-labelContainer'>"),"action"===I||"display"===I?(l(y||q.iconType,x,h.iconStyle),n(C,z,m,B,F||"",G,A,null),o(),c.markup("</span></div>")):"toggle"===I?(H&&(h=H),j=h.get(),h.icon&&!H&&b.warn("Toggle menu items cannot have icons."),h.label&&(h.onLabel||h.offLabel)&&b.warn("Toggle menu items should not have both label and on/offLabel properties."),m=h.label,x=j?"icon-menu-check":"",m||(x=null,m=j?h.onLabel:h.offLabel,A="menuitem",j=null),l(Na,x),n(C,z,m,B,null,null,A,j),o(),c.markup("</span></div>")):"subMenu"===I&&(l(h.iconType||q.iconType,h.icon,h.iconStyle),n(C,z,h.label,null,"",null,A,null,!0),h.accelerator&&b.warn("Sub menu items cannot have accelerators."),c.markup("<span class='"+xa+"'>"),e(c,Na,w),c.markup("</span></span></div>"),D=a.htmlBuilder(),E=r._renderMenu(D,J,h.menu,!1,!1),c.markup("<div class='"+V+"' role='menu' tabindex='-1'").attr("id",C+"m").markup(">"+D.toString()),c.markup("</div>")),p+=" "+C,c.markup("</li>"),v+=1))}),c.markup("</ul></div>"),d.trim(p)},_checkScrollBounds:function(a,b){return a.find(ba).removeClass(Ga),b.scrollTop<=0?(a.find(ba+"."+da).addClass(Ga),b.scrollTop=0,!0):b.scrollTop>=b.scrollHeight-b.clientHeight&&(a.find(ba+"."+ea).addClass(Ga),b.scrollTop=b.scrollHeight-b.clientHeight,!0)},_startScrolling:function(a,b){function c(){return h.scrollTop+=b?-10:10,e._checkScrollBounds(a,h)?void e._stopScrolling():(e.scrollTimerId=setTimeout(function(){c()},g[f]),void(f<g.length-1&&(f+=1)))}var e=this,f=0,g=[100,99,96,91,84,75,64,51,36,19],h=k(a)[0];this.scrollTimerId&&this._stopScrolling(),d(document).on("mouseup.menuScrolling",function(){e._stopScrolling()}).on("mousemove.menuScrolling",function(a){0===d(a.target).closest(ba).length&&e._stopScrolling()}),c()},_stopScrolling:function(){clearTimeout(this.scrollTimerId),this.scrollTimerId=null,this.element.find(ba).removeClass(Ia),d(document).off(".menuScrolling")},_adjustMenubarForSize:function(b,e){var f,g,h,i,j,k,l,m=!1,n=0,o=this.element.width()-2,p=e.items;for(j=p[p.length-1],j&&j._overflow||(j=null),f=0;f<p.length;f++)h=p[f],h.hide?h._width=0:h._width=d("#"+a.escapeCSS(b+"_"+f)).outerWidth(!0),n+=h._width;if(n>o)for(j||(j={type:"subMenu",_overflow:!0,label:c.getMessage("APEX.MENU.OVERFLOW_LABEL"),menu:{items:[]}},p.push(j)),g=j.menu.items,f=p.length-2;f>=0&&n>o;)h=p[f],p.splice(f,1),"subMenu"===h.type&&(h.action||h.href)&&h.menu.items.unshift({type:"action",label:h.label,labelKey:h.labelKey,href:h.href,target:h.target,action:h.action,disabled:h.disabled}),"subMenu"===h.type&&h.menu.customContent&&(l=d("#"+a.escapeCSS(b+"_"+f)),k=l.children(W).children().eq(0),k.hide(),h.menu.customContent=k[0].id,d(document.body).append(k),l.children(W).attr("data-custom",null)),g.unshift(h),n-=void 0!==h._width?h._width:0,m=!0,f-=1;else if(j){for(g=j.menu.items,i=0,f=0;f<g.length&&i<3;f++)g[f]._width>0&&(i+=1);for(1===i&&(n-=this.element.find("."+pa).outerWidth(!0)),
delete j.current;g.length>0&&(h=g[0],n+=void 0!==h._width?h._width:0,!(n>o));)g.shift(),"subMenu"===h.type&&(h.action||h.href)&&h.menu.items.shift(),p.splice(p.length-1,0,h),m=!0;0===g.length&&p.pop()}return m}}),d.ui.dialog&&d.widget("ui.dialog",d.ui.dialog,{_allowInteraction:function(a){return d(a.target).closest(W).length>0||this._super(a)}}),d(function(){function c(c,e,f){var g,h=c.attr("data-menu");if(h){if(g=d("#"+a.escapeCSS(h)),!g.length)return void b.error("Menu cannot be found "+h);c.addClass(Ia).attr(Qa,"true"),f&&Wa.isCurrentMenu(g[0])||g.menu("toggle",c,!1).on("menuafterclose.menubutton",function(a,b){d(this).off(".menubutton"),c.removeClass(Ia).attr(Qa,"false")}),e&&t(g.find(ja).first())}}d("body").on("click",Oa,function(a){c(d(this),!0,!1)}).on("keydown",Oa,function(a){a.which===Ua.DOWN?(a.preventDefault(),c(d(this),!0,!0)):a.which===Ua.TAB&&(A=!0,Wa.closeAll())}),d(Oa).attr(Sa,"true").attr(Qa,"false"),d("body").on("apexafterrefresh",function(a){d(a.target).find(Oa).attr(Sa,"true").attr(Qa,"false")})})}(apex.util,apex.debug,apex.lang,apex.jQuery);